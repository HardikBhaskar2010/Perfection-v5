# Software Fundamentals for Makers

## Chapter 1: Programming Basics

Welcome to the software side of making! Hardware is powerful, but software brings it to life.

### What is Programming?

Programming is writing instructions that tell a computer (or microcontroller) what to do. Think of it as writing a recipe - precise, step-by-step instructions.

### Your First Program

```cpp
void setup() {
  pinMode(13, OUTPUT);  // Set pin 13 as output
}

void loop() {
  digitalWrite(13, HIGH);  // Turn LED on
  delay(1000);             // Wait 1 second
  digitalWrite(13, LOW);   // Turn LED off
  delay(1000);             // Wait 1 second
}
```

Congratulations! You just learned the classic LED blink program!

### Programming Concepts

**Variables**: Store data
```cpp
int ledPin = 13;        // Integer variable
float temperature = 25.5;  // Floating point
bool isOn = true;       // Boolean (true/false)
String message = "Hello";  // Text string
```

**Functions**: Reusable blocks of code
```cpp
void blinkLED(int times) {
  for(int i = 0; i < times; i++) {
    digitalWrite(13, HIGH);
    delay(500);
    digitalWrite(13, LOW);
    delay(500);
  }
}
```

**Conditions**: Make decisions
```cpp
if (temperature > 30) {
  digitalWrite(fanPin, HIGH);  // Turn on fan
} else {
  digitalWrite(fanPin, LOW);   // Turn off fan
}
```

**Loops**: Repeat actions
```cpp
for(int i = 0; i < 10; i++) {
  Serial.println(i);  // Print 0 to 9
}

while(button == LOW) {
  // Wait until button pressed
}
```

---

## Chapter 2: Arduino Programming

### Arduino IDE Basics

The Arduino IDE is your coding playground!

**Structure**:
- `setup()`: Runs once when program starts
- `loop()`: Runs continuously forever

**Key Functions**:
- `pinMode(pin, mode)`: Set pin as INPUT or OUTPUT
- `digitalWrite(pin, value)`: Set pin HIGH or LOW
- `digitalRead(pin)`: Read digital value from pin
- `analogRead(pin)`: Read analog value (0-1023)
- `analogWrite(pin, value)`: PWM output (0-255)
- `delay(ms)`: Pause execution
- `millis()`: Time since program started

### Serial Communication

Debugging and communication made easy!

```cpp
void setup() {
  Serial.begin(9600);  // Start serial at 9600 baud
  Serial.println("Hello, World!");
}

void loop() {
  int sensorValue = analogRead(A0);
  Serial.print("Sensor: ");
  Serial.println(sensorValue);
  delay(100);
}
```

### Reading Sensors

**Analog Sensor Example**:
```cpp
int potPin = A0;
int ledPin = 9;

void loop() {
  int value = analogRead(potPin);  // Read 0-1023
  int brightness = map(value, 0, 1023, 0, 255);  // Scale to 0-255
  analogWrite(ledPin, brightness);  // Set LED brightness
}
```

**Digital Sensor Example**:
```cpp
int buttonPin = 2;
int ledPin = 13;

void loop() {
  int buttonState = digitalRead(buttonPin);
  if(buttonState == HIGH) {
    digitalWrite(ledPin, HIGH);
  } else {
    digitalWrite(ledPin, LOW);
  }
}
```

---

## Chapter 3: Advanced Arduino Concepts

### Interrupts

Respond to events immediately!

```cpp
volatile int counter = 0;

void setup() {
  pinMode(2, INPUT_PULLUP);
  attachInterrupt(digitalPinToInterrupt(2), countPulse, FALLING);
}

void countPulse() {
  counter++;  // Runs when pin 2 goes LOW
}
```

### Timers Without delay()

Non-blocking timing for multitasking!

```cpp
unsigned long previousMillis = 0;
const long interval = 1000;

void loop() {
  unsigned long currentMillis = millis();
  
  if(currentMillis - previousMillis >= interval) {
    previousMillis = currentMillis;
    // Do something every second
    digitalWrite(13, !digitalRead(13));  // Toggle LED
  }
  
  // Other code runs continuously
}
```

### Libraries

Use pre-written code to save time!

**Popular Libraries**:
- `Servo.h`: Control servo motors
- `Wire.h`: I2C communication
- `SPI.h`: SPI communication
- `WiFi.h`: WiFi connectivity (ESP32/ESP8266)
- `DHT.h`: DHT sensor support
- `LiquidCrystal.h`: LCD displays

**Example**:
```cpp
#include <Servo.h>

Servo myServo;

void setup() {
  myServo.attach(9);  // Servo on pin 9
}

void loop() {
  myServo.write(90);   // Move to 90 degrees
  delay(1000);
  myServo.write(0);    // Move to 0 degrees
  delay(1000);
}
```

---

## Chapter 4: IoT and WiFi

### ESP32/ESP8266 WiFi

Connect your projects to the internet!

**Connect to WiFi**:
```cpp
#include <WiFi.h>

const char* ssid = "YourWiFi";
const char* password = "YourPassword";

void setup() {
  Serial.begin(115200);
  WiFi.begin(ssid, password);
  
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  
  Serial.println("\nWiFi Connected!");
  Serial.println(WiFi.localIP());
}
```

### HTTP Requests

Send data to web services!

```cpp
#include <HTTPClient.h>

void sendData(float temperature) {
  HTTPClient http;
  String url = "http://api.example.com/data";
  
  http.begin(url);
  http.addHeader("Content-Type", "application/json");
  
  String json = "{\"temp\":" + String(temperature) + "}";
  int httpCode = http.POST(json);
  
  if(httpCode > 0) {
    String response = http.getString();
    Serial.println(response);
  }
  
  http.end();
}
```

### MQTT Protocol

Lightweight messaging for IoT!

```cpp
#include <PubSubClient.h>

WiFiClient espClient;
PubSubClient client(espClient);

void setup() {
  client.setServer("mqtt.example.com", 1883);
  client.setCallback(messageReceived);
}

void messageReceived(char* topic, byte* payload, unsigned int length) {
  Serial.print("Message: ");
  for(int i = 0; i < length; i++) {
    Serial.print((char)payload[i]);
  }
}

void publishMessage() {
  client.publish("home/temperature", "23.5");
}
```

---

## Chapter 5: Data Structures

### Arrays

Store multiple values of the same type!

```cpp
int readings[10];  // Array of 10 integers

void loop() {
  for(int i = 0; i < 10; i++) {
    readings[i] = analogRead(A0);
    delay(100);
  }
  
  // Calculate average
  int sum = 0;
  for(int i = 0; i < 10; i++) {
    sum += readings[i];
  }
  int average = sum / 10;
}
```

### Strings

Work with text data!

```cpp
String message = "Temperature: ";
message += String(temperature);
message += " Â°C";
Serial.println(message);

// String functions
if(message.startsWith("Temp")) { }
if(message.indexOf("25") != -1) { }
String sub = message.substring(0, 5);
```

### Structs

Group related data together!

```cpp
struct SensorData {
  float temperature;
  float humidity;
  int lightLevel;
  unsigned long timestamp;
};

SensorData readings;

void loop() {
  readings.temperature = readTemperature();
  readings.humidity = readHumidity();
  readings.lightLevel = analogRead(A0);
  readings.timestamp = millis();
}
```

---

## Chapter 6: Error Handling

### Debugging Techniques

**Serial Print Debugging**:
```cpp
void loop() {
  Serial.println("Starting sensor read...");
  int value = analogRead(A0);
  Serial.print("Value: ");
  Serial.println(value);
  
  if(value > 512) {
    Serial.println("High value detected!");
  }
}
```

**Bounds Checking**:
```cpp
void setServoAngle(int angle) {
  if(angle < 0) angle = 0;
  if(angle > 180) angle = 180;
  myServo.write(angle);
}
```

**Validation**:
```cpp
float readTemperature() {
  float temp = dht.readTemperature();
  
  if(isnan(temp)) {
    Serial.println("Failed to read temperature!");
    return -999;  // Error value
  }
  
  if(temp < -40 || temp > 80) {
    Serial.println("Temperature out of range!");
    return -999;
  }
  
  return temp;
}
```

---

## Chapter 7: Code Organization

### Functions

Break code into logical pieces!

```cpp
// Good: Organized code
void setup() {
  initializePins();
  initializeSensors();
  connectWiFi();
}

void initializePins() {
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUTTON_PIN, INPUT_PULLUP);
}

void initializeSensors() {
  dht.begin();
  display.begin();
}

void connectWiFi() {
  WiFi.begin(ssid, password);
  while(WiFi.status() != WL_CONNECTED) {
    delay(500);
  }
}
```

### Constants and Defines

Make code readable and maintainable!

```cpp
#define LED_PIN 13
#define BUTTON_PIN 2
#define SENSOR_PIN A0

const int TEMP_THRESHOLD = 30;
const long BLINK_INTERVAL = 1000;
const char* WIFI_SSID = "MyWiFi";
```

### Comments

Explain what your code does!

```cpp
// Calculate average of sensor readings
int calculateAverage(int readings[], int size) {
  int sum = 0;
  
  // Add all values
  for(int i = 0; i < size; i++) {
    sum += readings[i];
  }
  
  return sum / size;  // Return average
}
```

---

## Chapter 8: Common Algorithms

### Moving Average Filter

Smooth noisy sensor data!

```cpp
const int numReadings = 10;
int readings[numReadings];
int readIndex = 0;
int total = 0;

int getSmoothedValue() {
  total = total - readings[readIndex];
  readings[readIndex] = analogRead(A0);
  total = total + readings[readIndex];
  readIndex = (readIndex + 1) % numReadings;
  
  return total / numReadings;
}
```

### Debouncing

Handle button presses cleanly!

```cpp
const int buttonPin = 2;
int buttonState = HIGH;
int lastButtonState = HIGH;
unsigned long lastDebounceTime = 0;
const unsigned long debounceDelay = 50;

void loop() {
  int reading = digitalRead(buttonPin);
  
  if(reading != lastButtonState) {
    lastDebounceTime = millis();
  }
  
  if((millis() - lastDebounceTime) > debounceDelay) {
    if(reading != buttonState) {
      buttonState = reading;
      if(buttonState == LOW) {
        // Button pressed!
      }
    }
  }
  
  lastButtonState = reading;
}
```

### State Machine

Manage complex behaviors!

```cpp
enum State {
  IDLE,
  SENSING,
  PROCESSING,
  SENDING
};

State currentState = IDLE;

void loop() {
  switch(currentState) {
    case IDLE:
      if(buttonPressed()) {
        currentState = SENSING;
      }
      break;
      
    case SENSING:
      readSensors();
      currentState = PROCESSING;
      break;
      
    case PROCESSING:
      processData();
      currentState = SENDING;
      break;
      
    case SENDING:
      sendData();
      currentState = IDLE;
      break;
  }
}
```

---

## Chapter 9: Best Practices

### Memory Management

Arduino has limited RAM - use it wisely!

```cpp
// Bad: Wastes RAM
String message = "Temperature: " + String(temp) + " C";

// Good: Uses less memory
char message[50];
sprintf(message, "Temperature: %.1f C", temp);

// Use PROGMEM for constant strings
const char message[] PROGMEM = "This is stored in flash, not RAM";
```

### Power Management

Save battery life!

```cpp
#include <avr/sleep.h>

void enterSleep() {
  set_sleep_mode(SLEEP_MODE_PWR_DOWN);
  sleep_enable();
  sleep_mode();  // Go to sleep
  sleep_disable();  // Wake up here
}

void loop() {
  readSensors();
  sendData();
  enterSleep();  // Sleep until interrupt
}
```

### Code Style

Write clean, readable code!

```cpp
// Good naming
int temperatureSensor = A0;
float currentTemperature = 0;
bool isHeatingEnabled = false;

// Good indentation
if(temperature > threshold) {
  if(time > interval) {
    enableHeating();
  }
}

// Good comments
// Read temperature every 2 seconds
// If above 30Â°C, turn on fan
// If below 20Â°C, turn on heater
```

---

## Chapter 10: Project Patterns

### Sensor Reading Pattern

```cpp
class Sensor {
private:
  int pin;
  int lastValue;
  unsigned long lastReadTime;
  unsigned long readInterval;
  
public:
  Sensor(int p, unsigned long interval) {
    pin = p;
    readInterval = interval;
    lastReadTime = 0;
    lastValue = 0;
  }
  
  void update() {
    if(millis() - lastReadTime >= readInterval) {
      lastValue = analogRead(pin);
      lastReadTime = millis();
    }
  }
  
  int getValue() {
    return lastValue;
  }
};
```

### Data Logger Pattern

```cpp
void logData() {
  String data = String(millis()) + ",";
  data += String(temperature) + ",";
  data += String(humidity) + ",";
  data += String(pressure);
  
  Serial.println(data);
  saveToSD(data);
}
```

---

## Conclusion

You've completed your software journey! Key takeaways:

âœ… **Start simple** - Blink an LED before building a robot
âœ… **Test frequently** - Upload and test every small change
âœ… **Use Serial.print()** - Your best debugging tool
âœ… **Read documentation** - Arduino reference is your friend
âœ… **Learn from examples** - Study existing code
âœ… **Ask questions** - Join Arduino forums and communities
âœ… **Keep learning** - Technology always evolves

Software makes hardware smart. With these skills, you can:
- Read any sensor
- Control any actuator
- Connect to the internet
- Process data intelligently
- Build amazing projects!

Now go write some code and bring your ideas to life!

**Happy Coding! ðŸ’»ðŸš€âœ¨**